<br />
<br /><br /><br /><br />
<div class="container-fluid">
  <div class="row">
    <div class="col">
      <div class="card">
        <div class="retrieval_add_form">
          <form class="needs-validation p-4" [formGroup]="AddFileInwardForm">
            <div class="row mb-3 align-items-center">
              <div class="col-auto">
                <label for="BatchID">Batch ID</label>
              </div>
              <div class="col-2">
                <input name="appl" type="text" readonly placeholder="Document Type" type="text" class="form-control"
                  formControlName="batchId" />
                <div *ngIf="
                      FormControls['batchId'].invalid &&
                      (FormControls['batchId'].touched || submitted)
                    " class="invalid-feedback">
                  <div *ngIf="FormControls['batchId'].hasError('required')">
                    * Branch Code is required.
                  </div>
                </div>
              </div>

              <div class="col-auto">
                <label for="BatchID">Department Name</label>
              </div>
              <div class="col-3">
                <select formControlName="department" class="form-control form-select" [ngClass]="{
                      'is-invalid':
                        FormControls['department'].invalid &&
                        (FormControls['department'].touched || submitted)
                    }">
                  <option value="" disabled selected>--Select--</option>
                  <option *ngFor="let i of departmentDropdown" [ngValue]="i.value">
                    {{ i.label }}
                  </option>

                </select>
                <div *ngIf="
                      FormControls['department'].invalid &&
                      (FormControls['department'].touched || submitted)
                    " class="invalid-feedback">
                  <div *ngIf="
                        FormControls['department'].hasError('required')
                      ">
                    *Required.
                  </div>
                </div>
              </div>

              <div class="col-auto">
                <label for="BatchID">Upload File</label>
              </div>
              <div class="col-3">
                <input id="csvReader" name="appl" type="file" accept=".csv"
                  (change)="onFileSelected($event);uploadListener($event)" type="file"
                  class="form-control form-control-md" />
              </div>

            </div>
            <div class="float-right py-3 mt-3">
              <a class="btn btn-outline-success" [class.disabled]="AddFileInwardForm.invalid"
                [style.pointer-events]="AddFileInwardForm.invalid ? 'none' : 'auto'"
                (click)="!AddFileInwardForm.invalid && SaveData()">
                Save
              </a>

              <a class="btn btn-outline-primary" (click)="onSubmit()">
                Back
              </a>

              <!-- <a class="btn btn-sm btn-neutral" (click)="OnReset()">Reset</a> -->

              <!-- <a 
    class="btn btn-outline-danger"
    (click)="CloseRequest()">
    Close Batch
  </a> -->

              <a class="btn btn-sm btn-neutral btn-grey-hover ml-2" (click)="downloadCSV()">
                Download Format
              </a>
            </div>

          </form>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="container-fluid mt--3">
  <p-table [paginator]="true" [rows]="10" [value]="formattedData" [autoLayout]="true" [showCurrentPageReport]="true"
    [rowsPerPageOptions]="[10, 25, 50, 100]" [(first)]="first" (onPage)="paginate($event)" [loading]="loading"
    currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries">
    <ng-template pTemplate="caption">
      <input type="text" pInputText size="50" placeholder="Search records" (input)="searchTable($event)"
        class="global-search search" />
    </ng-template>
    <ng-template pTemplate="header">
      <tr>
        <!-- <th style="width: 5%; white-space: nowrap">ACTION</th> -->
        <th *ngFor="let col of headerList; let i = index" [ngStyle]="i == 0 && { width: '5%' }">
          {{ col.header }}
        </th>
      </tr>
    </ng-template>

    <ng-template pTemplate="body" let-car let-rowIndex="rowIndex">
      <tr>
        <!-- ACTION column first -->
        <!-- <td style="white-space: nowrap">
      <a type="button"
         style="padding:0 0 5px 4px; border-radius: 50%; background-color: white;"
         class="btn btn-icon btn-icon-only" (click)="DeleteRecord(car)">
        <span class="btn-inner--icon"><i class="fa fa-trash"></i></span>
      </a>
    </td> -->

        <!-- Data columns -->
        <td *ngFor="let col of headerList">
          {{ car[col.field] }}
        </td>
      </tr>
    </ng-template>

  </p-table>
</div>